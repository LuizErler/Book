<div class="container mt-5">
  <h2 class="text-center mb-4">Cadastro de Livro</h2>

  <div class="form-container" [ngClass]="{ 'show-form': showForm }">
    <form #livroForm="ngForm" (ngSubmit)="onSubmit(livroForm)" class="mx-auto" style="max-width: 600px;">

      <div class="form-group">
        <label for="titulo">Título:</label>
        <input 
          type="text" 
          id="titulo" 
          name="titulo" 
          class="form-control" 
          [(ngModel)]="livro.titulo" 
          required
          placeholder="Digite o título do livro"
        >
      </div>
  

      <div class="form-group">
        <label for="editora">Editora:</label>
        <input 
          type="text" 
          id="editora" 
          name="editora" 
          class="form-control" 
          [(ngModel)]="livro.editora" 
          placeholder="Digite a editora"
        >
      </div>
  
   
      <div class="form-group">
        <label for="edicao">Edição:</label>
        <input 
          type="number" 
          id="edicao" 
          name="edicao" 
          class="form-control" 
          [(ngModel)]="livro.edicao" 
          placeholder="Digite a edição"
        >
      </div>
  
    
      <div class="form-group">
        <label for="anoPublicacao">Ano de Publicação:</label>
        <input 
          maxlength="4"
          type="text" 
          id="anoPublicacao" 
          name="anoPublicacao" 
          class="form-control" 
          [(ngModel)]="livro.anoPublicacao" 
          (blur)="validarAnoPublicacao(livro.anoPublicacao)" 
          placeholder="Digite o ano de publicação"
        >
      </div>
  

      <div class="form-group">
        <label for="valor">Valor:</label>
        <label for="valor" class="valor-label">R$</label>
        <input
         class="form-control"
         type="text" 
         [(ngModel)]="livro.valor" 
         name="valor"
         (input)="somenteNumeros($event)"
         maxlength="8"
         />
      </div>
  

      <div class="form-group">
        <label for="autor">Autor:</label>
        <select 
          id="autor" 
          name="autorIds" 
          class="form-control" 
          [(ngModel)]="livro.autorIds" 
          multiple
          required
        >
          <option *ngFor="let autor of autores" [value]="autor.codAu">
            {{ autor.nome }}
          </option>
        </select>
      </div>
  

      <div class="form-group">
        <label for="assunto">Assunto:</label>
        <select 
          id="assunto" 
          name="assuntoIds" 
          class="form-control" 
          [(ngModel)]="livro.assuntoIds" 
          multiple
          required
        >
          <option *ngFor="let assunto of assuntos" [value]="assunto.codAs">
            {{ assunto.descricao }}
          </option>
        </select>
      </div>
  
      <button 
        type="submit" 
        class="btn btn-primary btn-block mt-3" 
        [disabled]="!livroForm.valid">
        Cadastrar
      </button>
    </form>
  </div>

  <div class="toggle-bar" (click)="toggleForm()">
    <i [class]="showForm ? 'fas fa-chevron-up' : 'fas fa-chevron-down'"></i>
  </div>
</div>

<app-livro-tabela></app-livro-tabela>
